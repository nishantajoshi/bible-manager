// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
}

model BibleTranslation {
  id           Int      @id @default(autoincrement())
  name         String   @unique
  abbreviation String   @unique
  language     String
  description  String?
  books        Book[]
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([name])
  @@index([abbreviation])
  @@map("bible_translations")
}

model Book {
  id            Int              @id @default(autoincrement())
  name          String
  abbreviation  String
  bookNumber    Int
  testament     String
  translationId Int
  translation   BibleTranslation @relation(fields: [translationId], references: [id], onDelete: Cascade)
  chapters      Chapter[]
  createdAt     DateTime         @default(now())
  updatedAt     DateTime         @updatedAt

  @@unique([translationId, bookNumber])
  @@index([translationId])
  @@map("books")
}

model Chapter {
  id            Int      @id @default(autoincrement())
  chapterNumber Int
  bookId        Int
  book          Book     @relation(fields: [bookId], references: [id], onDelete: Cascade)
  verses        Verse[]
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@unique([bookId, chapterNumber])
  @@index([bookId])
  @@map("chapters")
}

model Verse {
  id          Int      @id @default(autoincrement())
  verseNumber Int
  text        String
  chapterId   Int
  chapter     Chapter  @relation(fields: [chapterId], references: [id], onDelete: Cascade)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([chapterId, verseNumber])
  @@index([chapterId])
  @@map("verses")
}
